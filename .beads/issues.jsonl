{"id":"ai-config-manager-032","title":"Research: Analyze source provider architecture and interfaces","description":"## Description\n\nAnalyze current codebase to understand how source providers (local, GitHub, Git) are implemented. Document the architecture to inform agentskills.in integration.\n\n## Research Questions\n\n1. **Do we have clear interfaces/abstractions for source providers?**\n   - Is there a `Source` interface or base type?\n   - Or is each provider (local, GitHub) handled separately?\n\n2. **How does GitHub source work?**\n   - Entry point: Where is `gh:owner/repo` parsed?\n   - Resolution: How is it converted to local path?\n   - Workspace: How does it interact with `pkg/workspace`?\n   - Metadata: How is GitHub URL tracked after import?\n\n3. **How does local source work?**\n   - Entry point: Where are local paths handled?\n   - Resolution: Direct passthrough or processing?\n   - Symlinks: How are symlinked resources handled?\n\n4. **Source resolution flow:**\n   - Parse → Resolve → Discover → Import\n   - Where does each step happen?\n   - Which packages are involved?\n\n## Files to Investigate\n\n**Source Parsing:**\n- `pkg/source/parser.go` - Source string parsing\n- `pkg/source/git.go` - Git operations\n- `pkg/source/github.go` - GitHub-specific logic (if exists)\n\n**Repository Management:**\n- `pkg/repo/manager.go` - Import operations\n- `pkg/repo/add.go` - AddCommand, AddSkill, AddAgent\n\n**Discovery:**\n- `pkg/discovery/*.go` - Resource discovery in directories\n\n**Workspace:**\n- `pkg/workspace/manager.go` - Git repository caching\n\n**Metadata:**\n- `pkg/resource/*.go` - Resource metadata structs\n- How is source URL tracked? Is it stored with resources?\n\n## Expected Output\n\nCreate a document: `docs/research/source-provider-architecture.md`\n\n**Contents:**\n1. **Current Architecture Diagram**\n   - Components involved in source → import flow\n   - Data flow diagram\n\n2. **Source Provider Comparison Table**\n   | Feature | Local | GitHub | Git URL |\n   |---------|-------|--------|---------|\n   | Prefix | (none) | gh: | https:// |\n   | Parser | ? | ? | ? |\n   | Resolver | ? | ? | ? |\n   | Workspace | No | Yes | Yes |\n   | Metadata | ? | ? | ? |\n\n3. **Interface Analysis**\n   - Do interfaces exist? If not, where should they be?\n   - Proposed interface for source providers\n\n4. **Recommendations**\n   - Should we refactor before adding agentskills?\n   - Can agentskills follow existing pattern?\n   - What needs to change?\n\n## Acceptance Criteria\n\n- [ ] Documented how `gh:owner/repo` flows through the codebase\n- [ ] Documented how local paths flow through the codebase\n- [ ] Identified if source provider interface exists\n- [ ] Created architecture diagram (ASCII or Mermaid)\n- [ ] Answered all 4 research questions above\n- [ ] Provided recommendations for agentskills integration\n","status":"closed","priority":1,"issue_type":"task","owner":"hans.kohlreiter@dynatrace.com","created_at":"2026-02-07T19:42:47.88744672+01:00","created_by":"Hans Kohlreiter","updated_at":"2026-02-07T19:48:20.364596475+01:00","closed_at":"2026-02-07T19:48:20.364596475+01:00","close_reason":"Research complete: Documented source provider architecture with recommendations for agentskills.in integration"}
{"id":"ai-config-manager-2h5","title":"Epic Acceptance: AgentSkills.in Backend Integration","description":"## Gate Criteria\n\nThis task verifies that agentskills.in backend integration is complete, clean, and well-architected.\n\n### Functional Criteria\n\n- [ ] Can import skills from agentskills.in CLI\n- [ ] agentskills sources work in sync config\n- [ ] Imported skills install correctly\n\n### Architectural Criteria\n\n- [ ] Source Provider Abstraction exists\n- [ ] Workspace Strategy decided and implemented\n- [ ] Metadata Tracking implemented\n- [ ] Error Handling robust\n\n### Documentation Criteria\n\n- [ ] Architecture documented in docs/research/\n- [ ] README updated with agentskills examples\n- [ ] Code documented\n\n### Quality Criteria\n\n- [ ] Tests written and passing\n- [ ] Code reviewed\n- [ ] Performance acceptable\n\n## Owner\n\nbeads-verify-agent\n","status":"open","priority":1,"issue_type":"task","owner":"hans.kohlreiter@dynatrace.com","created_at":"2026-02-07T19:43:59.649413253+01:00","created_by":"Hans Kohlreiter","updated_at":"2026-02-07T19:43:59.649413253+01:00","labels":["gate"],"dependencies":[{"issue_id":"ai-config-manager-2h5","depends_on_id":"ai-config-manager-660","type":"blocks","created_at":"2026-02-07T19:44:06.825284804+01:00","created_by":"Hans Kohlreiter"},{"issue_id":"ai-config-manager-2h5","depends_on_id":"ai-config-manager-032","type":"blocks","created_at":"2026-02-07T19:44:06.851503301+01:00","created_by":"Hans Kohlreiter"},{"issue_id":"ai-config-manager-2h5","depends_on_id":"ai-config-manager-9nf","type":"blocks","created_at":"2026-02-07T19:44:06.878709998+01:00","created_by":"Hans Kohlreiter"},{"issue_id":"ai-config-manager-2h5","depends_on_id":"ai-config-manager-4ag","type":"blocks","created_at":"2026-02-07T19:44:06.905667907+01:00","created_by":"Hans Kohlreiter"},{"issue_id":"ai-config-manager-2h5","depends_on_id":"ai-config-manager-6v1","type":"blocks","created_at":"2026-02-07T19:44:06.933186959+01:00","created_by":"Hans Kohlreiter"}]}
{"id":"ai-config-manager-4ag","title":"Research: Metadata tracking for agentskills.in sources","description":"## Description\n\nResearch how to track source metadata for skills imported from agentskills.in, ensuring we can identify their origin and check for updates.\n\n## Research Questions\n\n1. **What metadata do we currently track?**\n   - For GitHub sources: What's stored?\n   - For local sources: What's stored?\n   - Where is metadata stored? (in resource files? separate .metadata.yaml?)\n\n2. **What agentskills.in metadata should we track?**\n   - API provides:\n     - `id` (unique skill ID)\n     - `name` (skill name)\n     - `author` (author username)\n     - `scopedName` (@author/name)\n     - `githubUrl` (source repo URL)\n     - `rawUrl` (direct download URL)\n     - `stars`, `forks` (popularity)\n     - `category`\n     - `updatedAt` (last update timestamp)\n\n   - Which fields are essential?\n   - Which enable update checking?\n\n3. **How to handle scoped names?**\n   - agentskills uses `@author/name` format\n   - aimgr uses `skill/name` format (no namespacing)\n   - Options:\n     - A: Store as `skills/pdf-processing/` (drop author)\n     - B: Store as `skills/@anthropic/pdf-processing/` (preserve namespace)\n     - C: Store as `skills/pdf-processing/` but track author in metadata\n\n4. **How to handle name conflicts?**\n   - Multiple authors might have skills with same name\n   - Example: Both `@anthropic/pdf` and `@vercel/pdf` exist\n   - How to differentiate in local repo?\n\n5. **Update checking mechanism:**\n   - GitHub: Can we `git fetch` and compare commits?\n   - agentskills: Query API by ID, compare `updatedAt`?\n   - Do we need to store last-synced timestamp?\n\n## Investigation Steps\n\n1. **Review existing metadata:**\n   ```bash\n   # Check skills in repository\n   find ~/.local/share/ai-config/repo/skills -name \"*.yaml\" -o -name \".metadata*\"\n   \n   # Check resource structs\n   grep -r \"Metadata\" pkg/resource/\n   ```\n\n2. **Analyze resource loading:**\n   - How does `LoadSkill()` read metadata?\n   - Is source URL stored with resources?\n   - Can we retrieve source after import?\n\n3. **Check existing source tracking:**\n   - Does GitHub URL get stored?\n   - Can we tell if a skill came from GitHub vs local?\n\n4. **Design metadata schema:**\n   ```yaml\n   # Proposed: .metadata.yaml in skill directory\n   name: pdf-processing\n   type: skill\n   source:\n     provider: agentskills      # \"local\", \"github\", \"agentskills\"\n     \n     # agentskills-specific fields:\n     id: skill-abc123\n     scopedName: \"@anthropic/pdf-processing\"\n     author: anthropic\n     githubUrl: \"https://github.com/anthropics/skills/...\"\n     rawUrl: \"https://raw.githubusercontent.com/...\"\n     stars: 450\n     category: documents\n     \n   imported:\n     at: \"2026-02-07T10:30:00Z\"\n     by: \"aimgr v0.2.0\"\n   \n   updated:\n     at: \"2026-02-07T10:30:00Z\"\n     apiVersion: \"2026-02-07T08:00:00Z\"  # updatedAt from API\n   ```\n\n## Expected Output\n\nCreate section in: `docs/research/source-provider-architecture.md`\n\n**Contents:**\n1. **Current Metadata Tracking**\n   - What we track for GitHub sources\n   - What we track for local sources\n   - Where metadata is stored\n\n2. **Proposed Metadata Schema**\n   - Fields for agentskills sources\n   - Rationale for each field\n\n3. **Name Conflict Resolution**\n   - Recommendation for handling scoped names\n   - Examples of conflict scenarios\n   - Proposed solution\n\n4. **Update Detection Strategy**\n   - How to detect when skill has updates\n   - Comparison with GitHub approach\n\n## Acceptance Criteria\n\n- [ ] Documented current metadata tracking approach\n- [ ] Proposed metadata schema for agentskills sources\n- [ ] Decided on scoped name handling (preserve author or not?)\n- [ ] Designed update detection mechanism\n- [ ] Addressed name conflict scenarios\n- [ ] Schema is extensible for future providers\n","status":"open","priority":1,"issue_type":"task","owner":"hans.kohlreiter@dynatrace.com","created_at":"2026-02-07T19:43:19.927402968+01:00","created_by":"Hans Kohlreiter","updated_at":"2026-02-07T19:43:19.927402968+01:00"}
{"id":"ai-config-manager-660","title":"AgentSkills.in Marketplace Integration","description":"## Description\n\nIntegrate agentskills.in marketplace as a source provider for aimgr, enabling users to discover and import skills from their 100,000+ skill catalog.\n\n## Goals\n\n- **Discovery**: Users can search agentskills.in marketplace from aimgr CLI\n- **Import**: Skills from agentskills.in can be imported to local repository\n- **Sync**: agentskills.in sources work with `aimgr repo sync` config\n- **Backend Architecture**: Clean abstraction for agentskills as a source provider (similar to GitHub)\n\n## Strategic Position\n\nagentskills.in is **complementary**, not a competitor:\n- **They provide**: Discovery layer (marketplace, search, 100k+ skills)\n- **We provide**: Local repository management, project integration, multi-source sync\n\n## User Workflow\n\n1. **Decide which skills to use** → Configure sources from multiple providers:\n   ```yaml\n   sync:\n     sources:\n       - url: ~/dev/my-skills              # Local\n       - url: gh:anthropics/skills         # GitHub\n       - url: agentskills:@anthropic/xlsx  # AgentSkills marketplace\n   ```\n\n2. **Use in projects** → Install from local repository:\n   ```bash\n   aimgr install skill/pdf-processing\n   ```\n\n3. **Update cleanly** → Via unified sync:\n   ```bash\n   aimgr repo sync  # Updates ALL sources\n   ```\n\n## Success Criteria\n\n- [ ] Can import skills from agentskills.in: `aimgr repo import agentskills:@anthropic/xlsx`\n- [ ] agentskills sources work in sync config\n- [ ] Backend has clean source abstraction (interface/trait pattern)\n- [ ] Metadata tracks agentskills.in sources properly\n- [ ] Workspace caching strategy decided (use or skip?)\n- [ ] Architecture documented for future source providers\n\n## Non-Goals (Future Phases)\n\n- Search command (`aimgr search agentskills python`) - separate epic\n- Interactive skill selection UI - separate epic\n- Category browsing - separate epic\n- Lock file / update checking - separate epic\n\n## Architecture Questions to Answer\n\n1. Do we have clear source provider interfaces?\n2. How does GitHub source work? Can we follow same pattern?\n3. Is workspace caching useful for agentskills? (they provide full content via API)\n4. How to track metadata for agentskills sources?\n5. How to handle scoped names (@author/skill)?\n\n## References\n\n- Competitor analysis: `docs/research/competitor-analysis-agent-skills-cli.md`\n- Integration plan: `docs/research/agentskills-integration-plan.md`\n- agentskills.in API: `https://www.agentskills.in/api/skills`\n","status":"open","priority":1,"issue_type":"epic","owner":"hans.kohlreiter@dynatrace.com","created_at":"2026-02-07T19:42:34.059681209+01:00","created_by":"Hans Kohlreiter","updated_at":"2026-02-07T19:42:34.059681209+01:00"}
{"id":"ai-config-manager-6v1","title":"Research: API client design and error handling","description":"## Description\n\nResearch how to design a robust API client for agentskills.in, including error handling, rate limiting, and fallback strategies.\n\n## Research Questions\n\n1. **API Endpoint Analysis:**\n   - Base URL: `https://www.agentskills.in/api/skills`\n   - What endpoints do we need?\n     - Search: `GET /api/skills?search=...`\n     - Get by name: `GET /api/skills?author=...\u0026name=...`\n     - Categories: `GET /api/categories` (future)\n   - Response format: JSON\n   - Authentication: None (public API)\n\n2. **Error Handling:**\n   - Network errors: What if API is down?\n   - 404 errors: Skill not found\n   - Rate limiting: Are there rate limits?\n   - Fallback: Should we try GitHub URL if API fails?\n\n3. **Content Acquisition:**\n   - API provides `content` field (full SKILL.md)\n   - Also provides `rawUrl` (GitHub raw file URL)\n   - Also provides `githubUrl` (repo URL)\n   - Priority:\n     1. Use `content` from API (fastest)\n     2. Fallback to `rawUrl` download\n     3. Fallback to clone from `githubUrl`?\n\n4. **Caching Strategy:**\n   - HTTP caching: Use If-None-Match / ETag?\n   - In-memory cache: Cache API responses for N minutes?\n   - Disk cache: Cache downloaded content?\n\n5. **Data Validation:**\n   - Validate `content` field contains valid SKILL.md\n   - Validate metadata fields are present\n   - Handle missing/corrupt data\n\n## Investigation Steps\n\n1. **Test API endpoints:**\n   ```bash\n   # Search for skills\n   curl \"https://www.agentskills.in/api/skills?search=pdf\u0026limit=5\"\n   \n   # Get specific skill\n   curl \"https://www.agentskills.in/api/skills?author=anthropic\u0026name=xlsx\"\n   \n   # Check response format, error codes\n   curl -v \"https://www.agentskills.in/api/skills?search=nonexistent\"\n   ```\n\n2. **Analyze their CLI implementation:**\n   - Review `src/core/skillsdb.ts` from agent-skills-cli\n   - How do they handle errors?\n   - Do they cache responses?\n\n3. **Design client interface:**\n   ```go\n   type Client interface {\n       Search(opts SearchOptions) ([]Skill, error)\n       GetByName(name, author string) (*Skill, error)\n       GetByScopedName(scopedName string) (*Skill, error)\n       DownloadSkill(skill *Skill, destDir string) error\n   }\n   ```\n\n4. **Error handling patterns:**\n   - Use context for timeouts\n   - Retry logic for transient failures?\n   - Clear error messages for users\n\n## Expected Output\n\nCreate section in: `docs/research/source-provider-architecture.md`\n\n**Contents:**\n1. **API Client Design**\n   - Client struct and interface\n   - Methods needed\n   - Configuration options\n\n2. **Error Handling Strategy**\n   - Error types to handle\n   - Fallback mechanisms\n   - User-facing error messages\n\n3. **Content Acquisition Flow**\n   ```\n   1. Try: API content field\n      ↓ (if empty)\n   2. Try: rawUrl download\n      ↓ (if fails)\n   3. Try: Clone from githubUrl\n      ↓ (if fails)\n   4. Error: Skill unavailable\n   ```\n\n4. **Caching Recommendations**\n   - HTTP-level caching\n   - In-memory caching\n   - Disk caching (if any)\n\n## Acceptance Criteria\n\n- [ ] Tested agentskills.in API endpoints manually\n- [ ] Documented API response format\n- [ ] Designed Client interface\n- [ ] Defined error handling strategy\n- [ ] Documented content acquisition priority\n- [ ] Considered rate limiting / abuse prevention\n- [ ] Provided code sketches for key methods\n","status":"open","priority":2,"issue_type":"task","owner":"hans.kohlreiter@dynatrace.com","created_at":"2026-02-07T19:43:34.303925754+01:00","created_by":"Hans Kohlreiter","updated_at":"2026-02-07T19:43:34.303925754+01:00"}
{"id":"ai-config-manager-9nf","title":"Research: Workspace caching strategy for agentskills.in","description":"## Description\n\nInvestigate whether workspace caching (like we use for GitHub repos) is beneficial for agentskills.in sources, or if we should use a different approach.\n\n## Context\n\n**GitHub sources**: We clone Git repos to `~/.local/share/ai-config/repo/.workspace/` for 10-50x faster subsequent imports.\n\n**agentskills.in**: Provides full skill content via API response (`content` field in JSON). No Git clone needed.\n\n## Research Questions\n\n1. **Does agentskills.in need workspace caching?**\n   - API returns full content in response\n   - No need to clone Git repos\n   - But: API calls have latency, could we cache responses?\n\n2. **If we cache, what do we cache?**\n   - Option A: Cache API responses (JSON) for 5 minutes\n   - Option B: Store downloaded skills in workspace-like directory\n   - Option C: No caching, always fetch fresh from API\n\n3. **How would workspace be used?**\n   - GitHub: `workspace/github.com-owner-repo-ref/`\n   - agentskills: `workspace/agentskills-\u003cskill-id\u003e/`?\n   - Or: No workspace at all?\n\n4. **What's the update flow?**\n   - GitHub: `git pull` in cached repo\n   - agentskills: Re-fetch from API (always fresh)\n   - Do we need to cache for `aimgr repo sync` performance?\n\n5. **Comparison with GitHub source:**\n   ```\n   GitHub source:\n     1. Parse gh:owner/repo\n     2. workspace.GetOrClone(url, ref)\n     3. Discovery in workspace path\n     4. Import from workspace\n   \n   agentskills source:\n     1. Parse agentskills:@author/skill\n     2. API call to fetch skill\n     3. ??? Where to put downloaded content ???\n     4. Discovery from ???\n     5. Import from ???\n   ```\n\n## Investigation Steps\n\n1. **Review workspace architecture:**\n   - Read `pkg/workspace/manager.go`\n   - Understand caching benefits (performance, offline use)\n   - Check pruning logic\n\n2. **Analyze GitHub source flow:**\n   - How does it use workspace?\n   - When does it populate workspace?\n   - When does it update workspace?\n\n3. **Consider agentskills scenarios:**\n   - **Scenario A**: No workspace\n     - Fetch from API → temp dir → import → delete temp\n     - Pros: Simple, always fresh\n     - Cons: No caching, repeated API calls\n\n   - **Scenario B**: Workspace for skills\n     - Fetch from API → `workspace/agentskills-\u003cid\u003e/` → import\n     - Pros: Caching, offline after first fetch\n     - Cons: More complex, might be stale\n\n   - **Scenario C**: Hybrid\n     - Use GitHub URL from API → workspace cache GitHub repo\n     - Pros: Leverage existing workspace\n     - Cons: Extra step, not using API content\n\n## Expected Output\n\nCreate section in: `docs/research/source-provider-architecture.md`\n\n**Contents:**\n1. **Workspace Benefits Analysis**\n   - Performance improvement numbers\n   - Offline use cases\n   - Disk space considerations\n\n2. **Recommendation for agentskills**\n   - Use workspace? Yes/No\n   - If yes: How to structure it?\n   - If no: Alternative approach?\n\n3. **Implementation sketch**\n   - Pseudocode for agentskills source resolution\n   - Where content lives during import\n   - Cleanup strategy\n\n## Acceptance Criteria\n\n- [ ] Documented how workspace caching works for GitHub\n- [ ] Analyzed 3 scenarios for agentskills (no cache, workspace, hybrid)\n- [ ] Provided clear recommendation with rationale\n- [ ] Sketched implementation approach\n- [ ] Considered `aimgr repo sync` performance implications\n","status":"open","priority":1,"issue_type":"task","owner":"hans.kohlreiter@dynatrace.com","created_at":"2026-02-07T19:43:04.250352164+01:00","created_by":"Hans Kohlreiter","updated_at":"2026-02-07T19:43:04.250352164+01:00"}
